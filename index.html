<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Archix-UBG</title>
  <link rel="icon" href="ACHXUBG.png" type="image/png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      font-family: Arial, sans-serif;
      background: #1e1e2f;
      color: white;
    }
    header {
      display: flex;
      align-items: center;
      gap: 16px;
      padding: 16px 24px;
      background: #7b3fe4;
      box-shadow: 0 4px 12px rgba(0,0,0,0.4);
    }
    header img {
      width: 48px;
      height: 48px;
      image-rendering: pixelated;
    }
    header h1 {
      margin: 0;
      font-size: 28px;
      font-weight: bold;
    }
    .search {
      margin-left: auto;
    }
    .search input {
      padding: 8px 12px;
      border-radius: 8px;
      border: none;
      outline: none;
      font-size: 16px;
    }
    main {
      padding: 24px;
      padding-bottom: 64px;
      overflow: hidden;
    }
    .games {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 20px;
    }
    .game {
      background: #2a2a40;
      border-radius: 16px;
      padding: 16px;
      cursor: pointer;
      transition: transform 0.15s ease, box-shadow 0.15s ease;
    }
    .game:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 24px rgba(0,0,0,0.5);
    }
    .game img {
      width: 100%;
      border-radius: 12px;
      margin-bottom: 12px;
    }
    .game h3 {
      margin: 0;
      font-size: 18px;
      text-align: center;
    }
    footer {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      text-align: center;
      padding: 12px;
      background: #181826;
      color: #aaa;
      font-size: 14px;
    }
    .overlay {
      position: fixed;
      inset: 0;
      background: #000000aa;
      display: none;
      z-index: 1000;
    }
    .player {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #111;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      transform: translateY(100%);
      transition: transform 0.35s ease;
      z-index: 1001;
    }
    .player.active {
      transform: translateY(0);
    }
    .player-bar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 14px;
      background: #7b3fe4;
      flex-shrink: 0;
    }
    .player-bar span {
      font-weight: bold;
    }
    .player-bar button {
      background: #2a2a40;
      border: none;
      color: white;
      padding: 6px 10px;
      border-radius: 8px;
      cursor: pointer;
    }
    .player iframe {
      flex: 1; /* fill all remaining vertical space */
      width: 100%;
      border: none;
    }
</style>
</head>
<body>
  <header>
    <img src="ACHXUBG.png" alt="Archix-UBG Logo">
    <h1>Archix-UBG</h1>
    <div class="search">
      <input id="search" type="text" placeholder="Search games...">
    </div>
  </header>

  <main>
    <div class="games" id="games">
	<div class="game" data-name="Suggest A Game" data-link="https://forms.gle/j52PdjMbc38z4ouF6">
        <img src="suggest.png" alt="suggest">
        <h3>Suggest A Game</h3>
      </div>
		<div class="game" data-name="Join Our Discord" data-link="https://discord.gg/atagqkma">
        <img src="https://images.icon-icons.com/2108/PNG/512/discord_icon_130958.png" alt="discord">
        <h3>Join Our Discord</h3>
      </div>
      <div class="game" data-name="Slope 2" data-link="https://rework-site.vercel.app/https://brooksch123.github.io/slope2.github.io/">
        <img src="slope-2.png" alt="Slope 2">
        <h3>Slope 2</h3>
      </div>
      <div class="game" data-name="Run 3" data-link="https://runtee.netlify.app">
        <img src="run3.png" alt="Run 3">
        <h3>Run 3</h3>
      </div>
      <div class="game" data-name="Retro Bowl" data-link="https://rbghio.netlify.app">
        <img src="retrobowl.png" alt="Retro Bowl">
        <h3>Retro Bowl</h3>
      </div>
      <div class="game" data-name="Minecraft" data-link="https://incomparable-figolla-2243a7.netlify.app">
        <img src="minecraft.jpg" alt="minecraft">
        <h3>Minecraft</h3>
      </div>
	  <div class="game" data-name="Geometry Dash Lite" data-link="https://geodashlite.netlify.app">
        <img src="gdl.png" alt="gdl">
        <h3>Geometry Dash Lite</h3>
      </div>
	  <div class="game" data-name="Friday Night Funkin" data-link="https://aergadfhugghjfhjgfgfhg.vercel.app/a/hvtrs8%2F-flf%2Ckfava3.aoo%2F0006-FLF-831-" data-lock="true">
        <img src="funkin.png" alt="fnf">
        <h3>Friday Night Funkin</h3>
      </div>
	  <div class="game" data-name="Baldi's Bacics Classic" data-link="https://extraordinary-puffpuff-4bb5a5.netlify.app">
        <img src="baldi.png" alt="baldi">
        <h3>Baldi's Bacics Classic</h3>
      </div>
	  <div class="game" data-name="Learn To Fly" data-link="https://sugargames.netlify.app/ltf1">
        <img src="ltf1.jpg" alt="ltf">
        <h3>Learn To Fly</h3>
      </div>
	  <div class="game" data-name="Snow Rider 3D" data-link="https://snowtheride.netlify.app">
        <img src="snowrider.jpg" alt="snow">
        <h3>Snow Rider 3D</h3>
      </div>
	  <div class="game" data-name="OvO" data-link="https://ovan1.netlify.app">
        <img src="ovo.jpg" alt="ovo">
        <h3>OvO</h3>
      </div>
	  <div class="game" data-name="Drive Mad" data-link="https://maddriver.netlify.app">
        <img src="drivemad1.png" alt="drivemad1">
        <h3>Drive Mad</h3>
      </div>
	  <div class="game" data-name="Ragdoll Archers" data-link="https://raghio.netlify.app">
        <img src="ragdollarchers.png" alt="ragdollarch">
        <h3>Ragdoll Archers</h3>
      </div>
	  <div class="game" data-name="Ragdoll Hit" data-link="https://rhghio.netlify.app">
        <img src="ragdollhit.jpg" alt="ragdollhit">
        <h3>Ragdoll Hit</h3>
      </div>
	  <div class="game" data-name="Duck Life 1" data-link="https://sugargames.netlify.app/ducklife1">
        <img src="ducklife1.png" alt="ducklife1">
        <h3>Duck Life 1</h3>
      </div>
	  <div class="game" data-name="Bloxorz" data-link="https://sugargames.netlify.app/bloxorz">
        <img src="bloxorz.png" alt="bloxorz">
        <h3>Bloxorz</h3>
      </div>
	  <div class="game" data-name="Papa's Burgeria" data-link="https://sugargames.netlify.app/papasburgeria">
        <img src="papasburgeria.jpg" alt="papasburgeria">
        <h3>Papa's Burgeria</h3>
      </div>
	  <div class="game" data-name="Papa's Pizzeria" data-link="https://sugargames.netlify.app/papaspizzeria">
        <img src="papaspizzeria.jpg" alt="pizzeria">
        <h3>Papa's Pizzeria</h3>
      </div>
	  <div class="game" data-name="Papa's Freezeria" data-link="https://sugargames.netlify.app/papasfreezeria">
        <img src="papas-freezeria.jpg" alt="papasfreezeria">
        <h3>Papa's Freezeria</h3>
      </div>
	  <div class="game" data-name="The Impossible Quiz" data-link="https://sugargames.netlify.app/365143_impossible_quiz_deluxe_ng">
        <img src="tiq.jpg" alt="tiq">
        <h3>The Impossible Quiz</h3>
      </div>
	  <div class="game" data-name="Bloons Tower Defence 3" data-link="https://sugargames.netlify.app/bloons-tower-defence-3">
        <img src="btd3.png" alt="btd3">
        <h3>Bloons Tower Defence 3</h3>
      </div>
	  <div class="game" data-name="Bloons Tower Defence 4" data-link="https://sugargames.netlify.app/bloons-tower-defence-4">
        <img src="btd4.png" alt="btd4">
        <h3>Bloons Tower Defence 4</h3>
      </div>
	  <div class="game" data-name="Sugar, Sugar" data-link="https://rework-site.vercel.app/https:/anonymousbirb5100.github.io/sugar-sugar/html/sugarsugar.html">
        <img src="sugar.png" alt="sugar">
        <h3>Sugar, Sugar</h3>
      </div>
	  <div class="game" data-name="Bloodmoney" data-link="https://bmghio.netlify.app">
        <img src="bloodmoney.jpg" alt="bloodmoney">
        <h3>Bloodmoney</h3>
      </div>
	  <div class="game" data-name="Ultrakill Prelude" data-link="https://thunderous-crumble-5b5ea6.netlify.app">
        <img src="ultrakill.png" alt="ultrakill">
        <h3>Ultrakill Prelude</h3>
      </div>
	  <div class="game" data-name="Mr Mine" data-link="https://rework-site.vercel.app/https:/www.coolmathgames.com/sites/default/files/public_games/48544/">
        <img src="mrmine.jpg" alt="mrmine">
        <h3>Mr Mine</h3>
      </div>
		<div class="game" data-name="Gladdihoppers" data-link="https://gloodohoop.netlify.app">
        <img src="gladdihoppers.png" alt="gladdihoppers">
        <h3>Gladdihoppers</h3>
      </div>
		<div class="game" data-name="Eggy Car" data-link="https://carwaegg.netlify.app">
        <img src="eggycar.jpeg" alt="eggcar">
        <h3>Eggy Car</h3>
      </div>
		<div class="game" data-name="A Dance Of Fire And Ice" data-link="https://adofai.netlify.app">
        <img src="adofai.png" alt="adofai">
        <h3>A Dance Of Fire And Ice</h3>
      </div>
		<div class="game" data-name="Gun Spin" data-link="https://spinthefinggun.netlify.app">
        <img src="gunspin.jpg" alt="gunspin">
        <h3>Gun Spin</h3>
      </div>
		<div class="game" data-name="Big Tower Tiny Square" data-link="https://tinysquareer.netlify.app">
        <img src="btts.png" alt="btts">
        <h3>Big Tower Tiny Square</h3>
	  </div>
		<div class="game" data-name="Swingo" data-link="https://swongobongo.netlify.app">
        <img src="swingo.png" alt="swingo">
        <h3>Swingo</h3>
      </div>
		<div class="game" data-name="Idle Breakout" data-link="https://idleing.netlify.app">
        <img src="idlebreak.jpg" alt="idlebreak">
        <h3>Idle Breakout</h3>
    </div>
		<div class="game" data-name="Superhot DEMO" data-link="https://suppurhoot.netlify.app">
        <img src="superhot.jpg" alt="superhot">
        <h3>Superhot DEMO</h3>
	  </div>
		<div class="game" data-name="Bit Plane" data-link="https://bitpolands.netlify.app">
        <img src="bitplanes.jpg" alt="bitplanes">
        <h3>Bit Planes</h3>
	  </div>
		<div class="game" data-name="Hover Racer" data-link="https://hoverrd.netlify.app">
        <img src="hover.jpg" alt="hover">
        <h3>Hover Racer</h3>
	  </div>
		<div class="game" data-name="Drift Boss" data-link="https://drifung.netlify.app">
        <img src="driftboss.jpg" alt="driftboss">
        <h3>Drift Boss</h3>
    </div>
		<div class="game" data-name="Levil Devil" data-link="https://level-devil-woad.vercel.app">
        <img src="lvldevil.jpg" alt="lvldevil">
        <h3>Levil Devil</h3>
    </div>
		<div class="game" data-name="Crazy Cattle 3D" data-link="https://crazycattle3dubg.netlify.app">
        <img src="crazycattle.png" alt="crazycattle">
        <h3>Crazy Cattle 3D</h3>
    </div>
		<div class="game" data-name="Google Snake" data-link="https://pap0r00-io.netlify.app/snake/inframe.html">
        <img src="snake.png" alt="crazycattle">
        <h3>Google Snake</h3>
    </div>
		<div class="game" data-name="Escaping The Prison" data-link="https://ornate-pasca-1e066a.netlify.app/etp">
        <img src="etp.png" alt="crazycattle">
        <h3>Escaping The Prison</h3>
    </div>
		<div class="game" data-name="Stealing The Diamond" data-link="https://ornate-pasca-1e066a.netlify.app/std">
        <img src="std.png" alt="crazycattle">
        <h3>Stealing The Diamond</h3>
    </div>
		<div class="game" data-name="Infiltrating The Airship" data-link="https://ornate-pasca-1e066a.netlify.app/ita">
        <img src="ita.png" alt="crazycattle">
        <h3>Infiltrating The Airship</h3>
    </div>
		<div class="game" data-name="Fleeing The Complex" data-link="https://ornate-pasca-1e066a.netlify.app/ftc">
        <img src="ftc.png" alt="crazycattle">
        <h3>Fleeing The Complex</h3>
    </div>
		<div class="game" data-name="Crossy Road" data-link="https://crossdaroad.netlify.app">
        <img src="crossyrd.jpg" alt="crazycattle">
        <h3>Crossy Road</h3>
    </div>
		<div class="game" data-name="Sort The Court" data-link="https://cortinginsort.netlify.app">
        <img src="court.jpg" alt="crazycattle">
        <h3>Sort The Court</h3>
    </div>
		<div class="game" data-name="Getting Over It" data-link="https://ornate-basbousa-5e25c2.netlify.app/Getting Over It v1.html">
        <img src="got.png" alt="crazycattle">
        <h3>Getting Over It</h3>
    </div>
		<div class="game" data-name="Slice Master" data-link="https://rework-site.vercel.app/https:/www.coolmathgames.com/sites/default/files/public_games/50815/">
        <img src="slice.jpg" alt="crazycattle">
        <h3>Slice Master</h3>
    </div>
		<div class="game" data-name="SM64" data-link="https://sm64netlify.netlify.app/sm64.html">
        <img src="sm64.jpg" alt="crazycattle">
        <h3>SM64</h3>
    </div>
		<div class="game" data-name="Paper.io 2" data-link="https://pap0r00-io.netlify.app/paperio2/">
        <img src="paper.jpg" alt="crazycattle">
        <h3>Paper.io 2</h3>
    </div>
		<div class="game" data-name="Opposite Day" data-link="https://rework-site.vercel.app/https:/www.coolmathgames.com/sites/default/files/public_games/51159/">
        <img src="oppositeday.png" alt="oppositeday">
        <h3>Opposite Day</h3>
    </div>
  </main>

  <div class="overlay" id="overlay"></div>

  <div class="player" id="player">
	  <div class="player-bar">
		<span id="playerTitle">Game</span>
		<div>
		  <button id="newTab">↗</button>
		  <button id="closePlayer">✕</button>
		</div>
	  </div>
	  <iframe id="playerFrame" scrolling="no"></iframe>
	</div>

  <footer>
    Made by archix.
  </footer>

  <script>
const search = document.getElementById('search');
const games = document.querySelectorAll('.game');
const player = document.getElementById('player');
const overlay = document.getElementById('overlay');
let frame = document.getElementById('playerFrame');
const title = document.getElementById('playerTitle');
const newTab = document.getElementById('newTab');
const closeBtn = document.getElementById('closePlayer');

let currentLink = '';

search.addEventListener('input', () => {
  const value = search.value.toLowerCase();
  games.forEach(game => {
    const name = game.dataset.name.toLowerCase();
    game.style.display = name.includes(value) ? 'block' : 'none';
  });
});

games.forEach(game => {
  game.addEventListener('click', () => {
    const link = game.dataset.link;
    if (!link) return;
    if (game.dataset.name === "Join Our Discord") {
      window.open(link, "_blank");
      return;
    }
    currentLink = link;
    title.textContent = game.dataset.name;

    // Reset iframe to stop any old scripts or audio
    const newFrame = document.createElement('iframe');
    newFrame.id = 'playerFrame';
    newFrame.scrolling = 'no';
    newFrame.style.flex = '1';
    newFrame.style.width = '100%';
    newFrame.style.border = 'none';
    // Sandbox to prevent leave-site warnings
    // newFrame.setAttribute('sandbox', 'allow-scripts allow-same-origin allow-forms');

    if (frame.parentNode) {
      frame.parentNode.replaceChild(newFrame, frame);
    }
    frame = newFrame;

    frame.src = link;

if (game.dataset.name === "Friday Night Funkin") {

  const originalLink = link;

  frame.onload = () => {
    try {
      const current = frame.contentWindow.location.href;

      if (!current.startsWith(originalLink)) {
        frame.src = originalLink; // force reload
      }

    } catch {
      // If cross-origin blocks us, just reload anyway
      frame.src = originalLink;
    }
  };
}

	  if (game.dataset.name === "A Dance Of Fire And Ice") {
  		frame.style.zoom = "1.5";
	  }


    overlay.style.display = 'block';
    player.classList.add('active');
  });
});

closeBtn.addEventListener('click', () => {
  player.classList.remove('active');
  overlay.style.display = 'none';
  
  // Clear iframe safely
  frame.src = 'about:blank';
});

overlay.addEventListener('click', () => closeBtn.click());

newTab.addEventListener('click', () => {
  if (currentLink) {
    const newWindow = window.open('about:blank', '_blank');
    if (newWindow) {
      newWindow.document.write(`
        <!DOCTYPE html>
        <html lang="en">
        <head>
          <meta charset="UTF-8">
          <title>${title.textContent}</title>
          <link rel="icon" href="ACHXUBG.png" type="image/png">
          <style>
            html, body {
              margin: 0;
              padding: 0;
              width: 100%;
              height: 100%;
              background: #111;
              display: flex;
              justify-content: center;
              align-items: center;
            }
            iframe {
              width: 100%;
              height: 100%;
              border: none;
            }
          </style>
        </head>
        <body>
          <iframe src="${currentLink}" scrolling="no"></iframe>
        </body>
        </html>
      `);
      newWindow.document.close();
    }
  }
});
</script>
